{
    "weather": "// Decompiled by MAD\nmodule 0x8378b3bd39931aa74a6aa3a820304c1109d327426e4275183ed0b797eb6660a8::weather {\n\n    // ----- Use Statements -----\n\n    use sui::object;\n    use std::string;\n    use std::option;\n    use sui::tx_context;\n    use sui::package;\n    use sui::transfer;\n    use sui::dynamic_object_field;\n\n    // ----- Structs -----\n\n    struct AdminCap has store, key {\n        id: object::UID,\n    }\n\n    struct CityWeatherOracle has store, key {\n        id: object::UID,\n        geoname_id: u32,\n        name: string::String,\n        country: string::String,\n        latitude: u32,\n        positive_latitude: bool,\n        longitude: u32,\n        positive_longitude: bool,\n        weather_id: u16,\n        temp: u32,\n        pressure: u32,\n        humidity: u8,\n        visibility: u16,\n        wind_speed: u16,\n        wind_deg: u16,\n        wind_gust: option::Option<u16>,\n        clouds: u8,\n        dt: u32,\n    }\n\n    struct WEATHER has drop {\n        dummy_field: bool,\n    }\n\n    struct WeatherNFT has store, key {\n        id: object::UID,\n        geoname_id: u32,\n        name: string::String,\n        country: string::String,\n        latitude: u32,\n        positive_latitude: bool,\n        longitude: u32,\n        positive_longitude: bool,\n        weather_id: u16,\n        temp: u32,\n        pressure: u32,\n        humidity: u8,\n        visibility: u16,\n        wind_speed: u16,\n        wind_deg: u16,\n        wind_gust: option::Option<u16>,\n        clouds: u8,\n        dt: u32,\n    }\n\n    struct WeatherOracle has key {\n        id: object::UID,\n        address: address,\n        name: string::String,\n        description: string::String,\n    }\n\n    // ----- Functions -----\n\n    fun init(weather: WEATHER, ctx: &mut tx_context::TxContext) {\n        package::claim_and_keep(weather, ctx);\n        let adminCap = AdminCap { id: object::new(ctx) };\n        let weatherOracle = WeatherOracle {\n            id: object::new(ctx),\n            address: tx_context::sender(ctx),\n            name: string::utf8(b\"SuiMeteo\"),\n            description: string::utf8(b\"A weather oracle for posting weather updates (temperature, pressure, humidity, visibility, wind metrics and cloud state) for major cities around the world. Currently the data is fetched from https://openweathermap.org. SuiMeteo provides the best available information, but it does not guarantee its accuracy, completeness, reliability, suitability, or availability. Use it at your own risk and discretion.\"),\n        };\n        transfer::share_object(weatherOracle);\n        transfer::public_transfer(adminCap, tx_context::sender(ctx));\n    }\n\n    public fun add_city(\n        admin_cap: &AdminCap,\n        oracle: &mut WeatherOracle,\n        geoname_id: u32,\n        name: string::String,\n        country: string::String,\n        latitude: u32,\n        positive_latitude: bool,\n        longitude: u32,\n        positive_longitude: bool,\n        ctx: &mut tx_context::TxContext\n    ) {\n        let city_weather_oracle = CityWeatherOracle {\n            id: object::new(ctx),\n            geoname_id,\n            name,\n            country,\n            latitude,\n            positive_latitude,\n            longitude,\n            positive_longitude,\n            weather_id: 0,\n            temp: 0,\n            pressure: 0,\n            humidity: 0,\n            visibility: 0,\n            wind_speed: 0,\n            wind_deg: 0,\n            wind_gust: option::none<u16>(),\n            clouds: 0,\n            dt: 0,\n        };\n        dynamic_object_field::add(&mut oracle.id, geoname_id, city_weather_oracle);\n    }\n\n    public fun remove_city(\n        admin_cap: &AdminCap,\n        oracle: &mut WeatherOracle,\n        city_id: u32\n    ) {\n        let CityWeatherOracle {\n            id,\n            geoname_id: _,\n            name: _,\n            country: _,\n            latitude: _,\n            positive_latitude: _,\n            longitude: _,\n            positive_longitude: _,\n            weather_id: _,\n            temp: _,\n            pressure: _,\n            humidity: _,\n            visibility: _,\n            wind_speed: _,\n            wind_deg: _,\n            wind_gust: _,\n            clouds: _,\n            dt: _,\n        } = dynamic_object_field::remove<u32, CityWeatherOracle>(&mut oracle.id, city_id);\n        object::delete(id);\n    }\n\n    public fun update(\n        admin_cap: &AdminCap,\n        oracle: &mut WeatherOracle,\n        city_id: u32,\n        weather_id: u16,\n        temp: u32,\n        pressure: u32,\n        humidity: u8,\n        visibility: u16,\n        wind_speed: u16,\n        wind_deg: u16,\n        wind_gust: option::Option<u16>,\n        clouds: u8,\n        dt: u32\n    ) {\n        let city_weather = dynamic_object_field::borrow_mut<u32, CityWeatherOracle>(&mut oracle.id, city_id);\n        city_weather.weather_id = weather_id;\n        city_weather.temp = temp;\n        city_weather.pressure = pressure;\n        city_weather.humidity = humidity;\n        city_weather.visibility = visibility;\n        city_weather.wind_speed = wind_speed;\n        city_weather.wind_deg = wind_deg;\n        city_weather.wind_gust = wind_gust;\n        city_weather.clouds = clouds;\n        city_weather.dt = dt;\n    }\n\n    public fun mint(\n        oracle: &WeatherOracle,\n        city_id: u32,\n        ctx: &mut tx_context::TxContext\n    ): WeatherNFT {\n        let city_weather = dynamic_object_field::borrow<u32, CityWeatherOracle>(&oracle.id, city_id);\n        WeatherNFT {\n            id: object::new(ctx),\n            geoname_id: city_weather.geoname_id,\n            name: city_weather.name,\n            country: city_weather.country,\n            latitude: city_weather.latitude,\n            positive_latitude: city_weather.positive_latitude,\n            longitude: city_weather.longitude,\n            positive_longitude: city_weather.positive_longitude,\n            weather_id: city_weather.weather_id,\n            temp: city_weather.temp,\n            pressure: city_weather.pressure,\n            humidity: city_weather.humidity,\n            visibility: city_weather.visibility,\n            wind_speed: city_weather.wind_speed,\n            wind_deg: city_weather.wind_deg,\n            wind_gust: city_weather.wind_gust,\n            clouds: city_weather.clouds,\n            dt: city_weather.dt,\n        }\n    }\n\n    public fun geoname_id(\n        oracle: &CityWeatherOracle\n    ): u32 {\n        oracle.geoname_id\n    }\n\n    public fun name(oracle: &CityWeatherOracle): string::String {\n        oracle.name\n    }\n\n    public fun country(oracle: &CityWeatherOracle): string::String {\n        oracle.country\n    }\n\n    public fun latitude(\n        oracle: &CityWeatherOracle\n    ): u32 {\n        oracle.latitude\n    }\n\n    public fun positive_latitude(\n        oracle: &CityWeatherOracle\n    ): bool {\n        oracle.positive_latitude\n    }\n\n    public fun longitude(\n        oracle: &CityWeatherOracle\n    ): u32 {\n        oracle.longitude\n    }\n\n    public fun positive_longitude(\n        oracle: &CityWeatherOracle\n    ): bool {\n        oracle.positive_longitude\n    }\n\n    public fun weather_id(\n        oracle: &CityWeatherOracle\n    ): u16 {\n        oracle.weather_id\n    }\n\n    public fun temp(oracle: &CityWeatherOracle): u32 {\n        oracle.temp\n    }\n\n    public fun pressure(oracle: &CityWeatherOracle): u32 {\n        oracle.pressure\n    }\n\n    public fun humidity(oracle: &CityWeatherOracle): u8 {\n        oracle.humidity\n    }\n\n    public fun visibility(\n        oracle: &CityWeatherOracle\n    ): u16 {\n        oracle.visibility\n    }\n\n    public fun wind_speed(oracle: &CityWeatherOracle): u16 {\n        oracle.wind_speed\n    }\n\n    public fun wind_deg(oracle: &CityWeatherOracle): u16 {\n        oracle.wind_deg\n    }\n\n    public fun wind_gust(oracle: &CityWeatherOracle): option::Option<u16> {\n        oracle.wind_gust\n    }\n\n    public fun clouds(\n        oracle: &CityWeatherOracle\n    ): u8 {\n        oracle.clouds\n    }\n\n    public fun dt(oracle: &CityWeatherOracle): u32 {\n        oracle.dt\n    }\n\n    public fun update_name(\n        admin_cap: &AdminCap,\n        oracle: &mut WeatherOracle,\n        name: string::String\n    ) {\n        oracle.name = name;\n    }\n\n    public fun update_description(\n        admin_cap: &AdminCap,\n        oracle: &mut WeatherOracle,\n        description: string::String\n    ) {\n        oracle.description = description;\n    }\n}"
}